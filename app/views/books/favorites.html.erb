<h1><%= @category.name %></h1>
<div class="book-grid">
  <% @books.each do |book| %>
    <%= render "book_card", book: book %>
  <% end %>
</div>
<div style="display: flex; flex-direction: column; justify-content: center; align-items: center">
  <p class="muted">Results: <%= @results_start %> - <%= @results_end %> of <%= @books_count %></p>
  <div class="review-pagination top-bar">
    <% if @page.positive? %>
      <%= link_to "Back", favorites_books_path(category_id: @category.id, page: @page - 1), class: "btn" %>
    <% else %>
      <span class="btn disabled">Back</span>
    <% end %>
    <% first_pages = [3, @total_pages].min %>
    <% (0...first_pages).each do |p| %>
      <% if p == @page %>
        <span class="btn"><%= p + 1 %></span>
      <% else %>
        <%= link_to p + 1, favorites_books_path(category_id: @category.id, page: p), class: "btn" %>
      <% end %>
    <% end %>
    <% if @total_pages > 3 %>
      <% if @total_pages > 4 %>
        <span class="btn">&hellip;</span>
      <% end %>
      <% last_page = @total_pages - 1 %>
      <% if last_page == @page %>
        <span class="btn"><%= @total_pages %></span>
      <% else %>
        <%= link_to @total_pages, favorites_books_path(category_id: @category.id, page: last_page), class: "btn" %>
      <% end %>
    <% end %>
    <% if @has_next %>
      <%= link_to "Next", favorites_books_path(category_id: @category.id, page: @page + 1), class: "btn" %>
    <% else %>
      <span class="btn disabled">Next</span>
    <% end %>
  </div>
</div>
